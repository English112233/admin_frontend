<template>
  <el-select v-model="country" filterable placeholder="请选择或搜索"
             @change="changeCountry">
    <el-option v-if="showEmpty" key="" label="全部" value=""></el-option>
    <el-option
      v-for="(name,key) in content"
      :key="key"
      :label="key+'-'+name"
      :value="key">
    </el-option>
  </el-select>
</template>
<script>
  import countryCode from 'bluesdk-country-code'
  // 国家地区选择器
  export default {
    name: 'CountrySelector',
    data: function () {
      return {
        content: countryCode,
        country: ''
      }
    },
    props: {
      val: '',
      showEmpty: {
        type: Boolean,
        default: false
      }
    },
    mounted: function () {
      this.country = this.val
    },
    beforeCreate: function () {
      // this.$getJson({
      //   url: '/config/countryList.do',
      //   callback: function (vue, res) {
      //     vue.content = res.content
      //     vue.$emit('getMap', res.content)
      //   }
      // }
    },
    methods: {
      changeCountry: function (val) {
        this.$emit('change', val)
      }
    },
    watch: {
      val: function (val) {
        this.country = val
      }
    }
  }
</script>
