<template>

    <el-select :disabled="disabled" v-model="value" @change="change" :placeholder="placeholder">
        <el-option v-if="showEmpty" :label="label" value="">
        </el-option>
        <el-option
                v-for="(name,id) in options"
                :key="id"
                :label="name"
                :value="id">
        </el-option>
    </el-select>


</template>
<script>
    export default {
        name: 'EnumSelect',
        data: function () {
            return {
                value: ''
            }
        },
        props: {
            showEmpty: {
                type: Boolean,
                default: false
            },
            disabled: {
                type: Boolean,
                default: false
            },
            selectedId: '',
            options: {
                type: Object,
                default: {}
            },
            label: {
                type: String,
                default: '全部'
            },
            placeholder: {
                type: String,
                default: '请选择'
            }
        },
        methods: {
            change: function (value) {
                this.$emit('change', value)
            }
        },
        mounted () {
            this.value = this.$getObjVal(this.options, this.selectedId, '')
        },
        watch: {
            selectedId () {
                this.value = this.$getObjVal(this.options, this.selectedId, '')
            },
            options: {  // option是对象，需要
                handler (newValue, oldValue) {
                    this.value = this.$getObjVal(this.options, this.selectedId, '')
                },
                deep: true
            }
        }
    }
</script>
