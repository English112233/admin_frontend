<template>
    <input type="text" :id="id" :name="name" :value="value" @change="change($event)" :placeholder="placeholder"/>
</template>
<script>
    var Pikaday = require('pikaday');
    import DateUtil from 'bluesdk-date-util'

    export default {
        props: {
            id: String,
            name: String,
            value: String,
            minDate: Date,
            maxDate: Date,
            placeholder: {
                type: String,
                default: '选择日期'
            }
        },
        mounted: function () {
            var self = this
            var minDate = this.minDate || new Date('2000-01-01')
            var maxDate = this.maxDate || new Date()
            var field = document.getElementById(this.id)

            var i18n = { // 本地化
                previousMonth: '上个月',
                nextMonth: '下个月',
                months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                weekdays: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
                weekdaysShort: ['日', '一', '二', '三', '四', '五', '六']
            }
            var picker = new Pikaday({
                field: field,
                minDate: minDate,
                maxDate: maxDate,
                i18n: i18n,
                format: 'YYYY-MM-DD'
            })
            picker.toString('YYYY-MM-DD')
        },
        methods: {
            change: function (event) {
                this.$emit('update:value', event.target.value)
            }
        }
    }
</script>
<style scoped>
    @import "./pikaday.css";
</style>
