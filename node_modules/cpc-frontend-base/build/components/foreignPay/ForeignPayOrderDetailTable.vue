<template>
    <entity-table :data="tableData"></entity-table>
</template>
<script>
    import CurrencyMap from '../../enum/CurrencyMap'
    import ForeignBizTypeEnum from '../../enum/ForeignBizTypeEnum'
    import ForeignFixMoneyTypeEnum from '../../enum/ForeignFixMoneyTypeEnum'
    import ForeignUtil from '../../util/ForeignUtil'
    import TradeStatusEnum from '../../enum/TradeStatusEnum'
    import {EntityTable, EntityMixin} from 'bluesdk-element-common'


    export default {
        name: 'ForeignPayOrderDetailTable',
        components: {EntityTable},
        mixins: [EntityMixin],
        data: function () {
            let self = this
            return {
                fieldConfig: {
                    merchantId: '商户号',
                    payChannel: '渠道ID',
                    account: '渠道账号',
                    accountId: 'accountId',
                    outTradeNo: '订单号',
                    batchNo: '批次号',
                    payType: {
                        label: '汇款类型',
                        value: function (entity) {
                            if (entity.currency === 'CNY') {
                                return '人民币汇款';
                            } else {
                                return '外币汇款(' + self.$getObjVal(ForeignFixMoneyTypeEnum.map, entity.fixMoneyType) + ')'
                            }
                        }
                    },
                    bizType: {
                        label: '业务类型',
                        value: function (entity) {
                            return self.$getObjVal(ForeignBizTypeEnum.map, entity.bizType)
                        }
                    },
                    remitMoney: {
                        label: '汇款金额',
                        value: function (entity) {
                            return self.$moneyFormat(entity.remitMoney) + ForeignUtil.orderCurrency(entity.currency, entity.fixMoneyType)
                        }
                    },
                    currency: {
                        label: '到账币种',
                        value: function (entity) {
                            return self.$getObjVal(CurrencyMap, entity.currency)
                        }
                    },
                    sucFlag: {
                        label: '交易状态',
                        value: function (entity) {
                            return TradeStatusEnum.getLabel(entity.sucFlag)
                        }
                    },
                    exchangeRate: '牌价',
                    rmbMoney: {
                        label: '折合人民币',
                        value: function (entity) {
                            return self.$moneyFormat(entity.rmbMoney) + '元'
                        },
                        show: function (entity) {
                            return Number(entity.payType) === 3000
                        }
                    },
                    feeMoney: {
                        label: '手续费',
                        value: function (entity) {
                            return self.$moneyFormat(entity.feeMoney) + '元人民币'
                        },
                        show: function (entity) {
                            return entity.sucFlag === TradeStatusEnum.SUCCESS.value
                        }
                    },
                    deductMoney: {
                        label: '支付金额',
                        value: function (entity) {
                            return self.$moneyFormat(entity.deductMoney) + '元人民币'
                        },
                        show: function (entity) {
                            return entity.sucFlag === TradeStatusEnum.SUCCESS.value
                        }
                    },
                    payeeName: '收款方名称',
                    payeeAccount: '收款方账号',
                    payeeCountryCode: '收款方地区',
                    payeeAddr: '收款方地址',
                    payeeBankName: '收款方开户行名称',
                    payeeBankAddr: '收款方开户行名称',
                    ibanCode: 'IBAN编码',
                    swiftCode: 'SWIFT编码',
                    bsbCode: 'BSB编码',
                    note: '汇款附言',
                    detailNum: '订单笔数',
                    detailFile: '明细文件',
                    detailFileMd5: '明细文件MD5',
                    contractFile: '合同文件',
                    contractFileMd5: '合同文件MD5',
                    rspCode: '请求状态',
                    rspMsg: '请求描述',
                    retCode: '返回状态',
                    retMsg: '返回描述',
                    createdAt: {
                        label: '创建时间',
                        value: function (entity) {
                            return self.$mTimeToDate(entity.createdAt)
                        }
                    },
                    updatedAt: {
                        label: '更新时间',
                        value: function (entity) {
                            return self.$mTimeToDate(entity.updatedAt)
                        }
                    }
                }
            }
        }
    }
</script>