<template>
  <div>
    <el-collapse-item :name="panelName" :class="`cls-${panelkey}`">
      <template slot="title">
        {{title}}信息
      </template>
      <!--法人信息-->
      <el-form-item label="姓">
        <el-col :span="18">
          <el-input v-model="model.lastName" :name="`${panelkey}lastName${index}`"
                    :id="`${panelkey}lastName${index}`" placeholder="姓"></el-input>
        </el-col>
      </el-form-item>
      <el-form-item label="名">
        <el-col :span="18">
          <el-input v-model="model.firstName" :name="`${panelkey}firstName${index}`"
                    :id="`${panelkey}firstName${index}`" placeholder="名"></el-input>
        </el-col>
      </el-form-item>
      <el-form-item label="身份证号码">
        <el-col :span="18">
          <el-input v-model="model.idCardNo" :name="`${panelkey}idCardNo${index}`"
                    :id="`${panelkey}idCardNo${index}`" placeholder="身份证号码"></el-input>
        </el-col>
      </el-form-item>
      <el-form-item label="证件有效期">
        <el-col :span="4" v-if="!model.longTerm">
          <date-picker
            :minDate="new Date()"
            :maxDate="new Date('2099-12-31')"
            :id="`${panelkey}expireDate${index}`"
            :name="`${panelkey}expireDate${index}`"
            @update:value="val=>model.expireDate=val? val:''"
            :value="model.expireDate"
            readonly="readonly"
            class="el-input__inner date-picker"
          ></date-picker>
        </el-col>
        <el-col :span="3">
          <el-checkbox v-model="model.longTerm" :id="`${panelkey}longTerm${index}`"
                       :name="`${panelkey}longTerm${index}`" class="ml10">长期有效
          </el-checkbox>
          <!--<el-input v-model="model.idCardNo" :name="`${panelkey}idCardNo${index}`"-->
          <!--:id="`${panelkey}idCardNo${index}`" placeholder="证件有效期">-->
          <!--</el-input>-->
        </el-col>
      </el-form-item>

      <el-form-item label="联系邮箱">
        <el-col :span="18">
          <el-input v-model="model.email" :name="`${panelkey}email${index}`"
                    :id="`${panelkey}email${index}`" placeholder="常用联系邮箱"></el-input>
        </el-col>
      </el-form-item>

      <el-form-item label="联系电话">
        <el-col :span="11">
          <el-input v-model="model.telephone" :name="`${panelkey}telephone${index}`"
                    :id="`${panelkey}telephone${index}`" placeholder="联系电话"></el-input>
        </el-col>
      </el-form-item>

      <!--<el-form-item label="国别代码">-->
      <!--<el-col :span="18">-->
      <!--&lt;!&ndash;<el-input v-model="model.countryCode" :name="`${panelkey}countryCode${index}`"&ndash;&gt;-->
      <!--&lt;!&ndash;:id="`${panelkey}countryCode${index}`" placeholder="国别代码" disabled></el-input>&ndash;&gt;-->
      <!--<el-input value="CN" placeholder="国别代码" disabled></el-input>-->
      <!--<input type="hidden" :name="`${panelkey}countryCode${index}`" :id="`${panelkey}countryCode${index}`"-->
      <!--value="CN">-->
      <!--</el-col>-->
      <!--</el-form-item>-->
      <input type="hidden" :name="`${panelkey}countryCode${index}`" :id="`${panelkey}countryCode${index}`"
             value="CN">

      <slot name="extend"></slot>

      <el-form-item :label="title+'身份证正面照'">
        <el-col :span="11">
          <upload class="el-button el-button--info is-plain"
                  :url="uploadUrl" @done="url => model.idPic1= url"
                  types="*.jpg;*.png" size="5MB"></upload>
          <preview-img :src="model.idPic1" class="mt10" :alt="title+'身份证正面照'"></preview-img>
          <input type="hidden" :name="`${panelkey}idPic1${index}`" :id="`${panelkey}idPic1${index}`"
                 v-model="model.idPic1">
        </el-col>
      </el-form-item>


      <el-form-item :label="title+'身份证反面照'">
        <el-col :span="11">
          <upload class="el-button el-button--info is-plain"
                  :url="uploadUrl" @done="url => model.idPic2= url"
                  types="*.jpg;*.png" size="5MB"></upload>
          <preview-img :src="model.idPic2" class="mt10" :alt="title+'身份证反面照'"></preview-img>
          <input type="hidden" :name="`${panelkey}idPic2${index}`" :id="`${panelkey}idPic2${index}`"
                 v-model="model.idPic2">
        </el-col>
      </el-form-item>

    </el-collapse-item>
  </div>
</template>
<script>
  import Upload from 'bluesdk-vue-upload'
  import appConfig from './appConfig.js'
  import PreviewImg from '../../common/PreviewImg'
  import DatePicker from 'bluesdk-vue-datepicker'

  export default {
    name: 'Person',
    data: function () {
      return {
        uploadUrl: appConfig.uploadUrl()
      }
    },
    props: {
      model: Object,
      title: String,
      index: Number, // 当前渲染的index，用于唯一标识
      panelkey: {  // 当前panel的key，由于区分法人和受益人
        type: String,
        default: 'key'
      },
      panelName: [Number, String],
      effectiveDate: [Number, String]
    },
    components: {
      PreviewImg,
      Upload,
      DatePicker
    }
  }
</script>
<style scoped>
</style>
