<template>
    <el-form :inline="true" class="query-form">

        <date-range :begin-value="dateBegin"
                    :end-value="dateEnd"
                    :common-range="commonDateRange"
                    @updateBeginValue="$emit('update:dateBegin',$event)"
                    @updateEndValue="$emit('update:dateEnd',$event)"
                    @updateCommonRange="$emit('update:commonDateRange',$event)"
        >
            <el-select :value="timeField" @change="$emit('update:timeField', $event)" placeholder="请选择" style="width: 110px;">
                <el-option
                        v-for="item in timeFieldOptions"
                        :key="item.value"
                        :label="item.label"
                        :value="item.value">
                </el-option>
            </el-select>

        </date-range>

        <slot name="extend"></slot>

        <el-form-item label="商户单号" prop="outTradeNo">
            <el-input :value="outTradeNo" @change="$emit('update:outTradeNo',$event)" name="outTradeNo" id="outTradeNo" placeholder="商户单号"></el-input>
        </el-form-item>

        <el-form-item label="状态" prop="payFlag">
            <enum-select :options="payFlagMap" :show-empty="true" :selected-id="payStatus"
                         @change="$emit('update:payStatus',$event)" style="width: 100px;"></enum-select>
        </el-form-item>


        <el-form-item label="支付方式" prop="payTypeMap">
            <enum-select :options="payTypeMap" :show-empty="true" :selected-id="payType"
                         @change="$emit('update:payType',$event)" style="width: 150px;"></enum-select>
        </el-form-item>

        <el-form-item>
            <el-button type="primary" @click="search()">查询</el-button>
        </el-form-item>
        <!--按钮插槽-->
        <slot name="extend-btn"></slot>
    </el-form>
</template>
<script>
    import PayFlagEnum from '../../enum/PayFlagEnum'
    import PayTypeEnum from '../../enum/PayTypeEnum'
    import {EnumSelect, DateRange} from 'bluesdk-element-common'

    export default {
        name: 'PayOrderSearchForm',
        data () {
            return {
                payFlagMap: PayFlagEnum.map,
                payTypeMap: PayTypeEnum.map,
                timeFieldOptions: [
                    {
                        value: 'createdAt',
                        label: '下单时间'
                    },
                    {
                        value: 'payAt',
                        label: '支付时间'
                    }
                ]
            }
        },
        props: {
            'dateBegin': String,
            'dateEnd': String,
            'commonDateRange': String,
            'timeField': String,
            'outTradeNo': String,
            'payStatus': String,
            'payType': String,
        },
        components: {DateRange, EnumSelect},
        methods: {
            search () {
                this.$emit('search')
            }
        }
    }
</script>
